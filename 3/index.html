<!DOCTYPE html>
<html>
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <title>Face Morphing - Project 3</title>
    <style>
        :root {
            --dark-purple: #1e1a2b;
            --medium-purple: #352d4d;
            --light-purple: #574f7d;
            --accent-purple: #7b6c9e;
            --beige: #f5f0e1;
            --light-beige: #fffaf0;
            --dark-beige: #e8e0cc;
        }
        
        body {
            font-family: 'Fira Code', monospace;
            margin: 0;
            padding: 0;
            background-color: var(--dark-purple);
            color: var(--beige);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--medium-purple);
            color: var(--light-beige);
            padding: 40px 0;
            text-align: center;
            border-bottom: 3px solid var(--accent-purple);
            margin-bottom: 30px;
        }
        
        h1 {
            margin: 0;
            font-size: 2.2rem;
            font-weight: 700;
            letter-spacing: -1px;
            color: var(--light-beige);
            padding: 20px;
            text-transform: capitalize;
        }
        
        h2 {
            color: var(--accent-purple);
            border-bottom: 2px solid var(--accent-purple);
            padding-bottom: 10px;
            margin-top: 40px;
            text-transform: capitalize;
        }
        
        h3 {
            color: var(--light-beige);
            margin-top: 30px;
            font-size: 1.3rem;
        }
        
        p {
            margin-bottom: 20px;
        }
        
        .back-link {
            display: inline-block;
            margin: 20px 0;
            color: var(--accent-purple);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .back-link:hover {
            color: var(--light-beige);
        }
        
        img {
            max-width: 100%;
            border-radius: 5px;
            border: 2px solid var(--accent-purple);
            margin: 10px 0;
        }
        
        .image-with-caption {
            margin: 20px 0;
            text-align: center;
        }
        
        .image-with-caption img {
            max-width: 70%;
            display: block;
            margin: 0 auto;
        }
        
        .image-with-caption p {
            margin-top: 10px;
            font-style: italic;
            color: var(--dark-beige);
        }
        
        .image-with-caption-small {
            margin: 10px;
            text-align: center;
        }
        
        .image-with-caption-small img {
            max-width: 100%;
        }
        
        .image-with-caption-small p {
            margin-top: 5px;
            font-style: italic;
            font-size: 0.9rem;
            color: var(--dark-beige);
        }
        
        .two-image-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .two-image-row .image-with-caption-small {
            flex: 0 0 45%;
            max-width: 45%;
        }
        
        .one-image-row {
            text-align: center;
            margin: 20px 0;
        }
        
        .one-image-row img {
            max-width: 70%;
            display: block;
            margin: 0 auto;
        }
        
        .gif {
            text-align: center;
            margin: 30px 0;
        }
        
        .gif img {
            max-width: 70%;
            height: auto;
            border: 3px solid var(--accent-purple);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .section {
            background-color: var(--medium-purple);
            border-radius: 8px;
            padding: 25px;
            margin: 40px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border-left: 3px solid var(--accent-purple);
        }
        
        .section-title {
            display: inline-block;
            background-color: var(--accent-purple);
            color: var(--light-beige);
            padding: 8px 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--accent-purple);
            color: var(--light-beige);
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-top: 15px;
            border: none;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .btn:hover {
            background-color: var(--light-purple);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        footer {
            margin-top: 60px;
            text-align: center;
            padding: 20px;
            background-color: var(--medium-purple);
            color: var(--dark-beige);
            border-top: 2px solid var(--accent-purple);
        }
        
        .table-of-contents {
            background-color: var(--medium-purple);
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
            border-left: 3px solid var(--accent-purple);
        }
        
        .table-of-contents ul {
            list-style-type: none;
            padding-left: 10px;
        }
        
        .table-of-contents li {
            margin-bottom: 10px;
        }
        
        .table-of-contents a {
            color: var(--light-beige);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .table-of-contents a:hover {
            color: var(--accent-purple);
        }
        
        .code-bracket {
            color: var(--accent-purple);
            font-weight: bold;
        }
        
        .subtitle {
            margin-top: 10px;
            font-size: 1.2rem;
            color: var(--dark-beige);
            font-weight: 300;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .two-image-row .image-with-caption-small {
                flex: 0 0 100%;
                max-width: 100%;
            }
            
            .one-image-row img, .image-with-caption img, .gif img {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><span class="code-bracket">{</span> Face Morphing <span class="code-bracket">}</span></h1>
            <div class="subtitle">// Project 3: Transforming faces through morphing</div>
        </div>
    </header>
    
    <div class="container">
        <a href="../index.html" class="back-link">‚Üê Back to Portfolio</a>
        
        <div class="table-of-contents">
            <div class="section-title">Table of Contents</div>
            <ul>
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#correspondences">Part 1: Defining Correspondences</a></li>
                <li><a href="#midway">Part 2: Mid-way Face</a></li>
                <li><a href="#morph-sequence">Part 3: Morph Sequence</a></li>
                <li><a href="#mean-face">Part 4: Mean Face of a Population</a></li>
                <li><a href="#caricatures">Part 5: Caricatures</a></li>
            </ul>
        </div>
        
        <section id="introduction" class="section">
            <div class="section-title">Introduction</div>
            <p>
                In this project I am trying to smoothly morph two images, manually selecting correspondences, using Delaunay triangulation and affine transformations.
                I also compute mean of the dataset of 100 ppl, try to warp my face into the average, warp a few faces from the dataset, and create a caricature of myself.
            </p>
        </section>
        
        <section id="correspondences" class="section">
            <div class="section-title">Part 1: Defining Correspondences</div>
            <p>
                I decided to do correspondences of Matthew Mcconaughey and Elon Musk. To define correspondences I used the given tool in project specification. Here's what I got
            </p>
            
            <h3>Matthew Mcconaughey and Elon Musk Images</h3>
            <div class="two-image-row">
                <div class="image-with-caption-small">
                    <img src="./media/Mcconaughey.jpg">
                    <p>Mcconaughey</p>
                </div>
                <div class="image-with-caption-small">
                    <img src="./media/Musk.jpg">
                    <p>Musk</p>
                </div>
            </div>
            
            <h3>Triangulations</h3>
            <div class="image-with-caption">
                <img src="./media/triangulation.png">
            </div>
        </section>
        
        <section id="midway" class="section">
            <div class="section-title">Part 2: Mid-way Face</div>
            <p>
                Here I computed the Mid-way face. To do that I used warp fraction and dissolve fraction(both 0.5). I created two empty images with the shape of our images, created blended points by
                '(1 - warp_fraction) * points_img1 + warp_fraction * points_img2', warped triangles(bounding rects, create a mask, fillconvexpoly and then affine(w/ billinear interpolation)). 
                In the end, I blened warped results doing '(1 - dissolve_fraction) * warped_img1 + dissolve_fraction * warped_img2' - using cross dissolve.
            </p>
            
            <h3>Midway Image Result</h3>
            <div class="image-with-caption">
                <img src="./media/midway_transformation.png">
            </div>
        </section>
        
        <section id="morph-sequence" class="section">
            <div class="section-title">Part 3: Morph Sequence</div>
            <p>
                Here, I just performed the same thing above, but getting 45 frames and making it a gif.
            </p>
            
            <div class="gif">
                <img src="./media/morph_sequence.gif" alt="Morphing Sequence">
            </div>
        </section>
        
        <section id="mean-face" class="section">
            <div class="section-title">Part 4: The "Mean Face" of a Population</div>
            <p>
                Here, I downloaded a dataset of 100 faces, took the average and created the "average face".
            </p>
            
            <h3>Average Face</h3>
            <div class="one-image-row">
                <img src="./media/avg_face.png">
            </div>
            
            <h3>Warping Examples</h3>
            <p>
                I used the average to warp myself and a few people from the dataset as an example
            </p>
            
            <div class="one-image-row">
                <img src="./media/me_warped.png">
            </div>
            
            <div class="one-image-row">
                <img src="./media/1a_morphed.png">
            </div>
            
            <div class="one-image-row">
                <img src="./media/2a_morphed.png">
            </div>
            
            <div class="one-image-row">
                <img src="./media/3a_morphed.png">
            </div>
        </section>
        
        <section id="caricatures" class="section">
            <div class="section-title">Part 5: Caricatures</div>
            <p>
                In this part I extrapolated the average using 'caricature_points = mean_points + extrapolation_factor * (keypoints - mean_points)', where the factor was > 1
            </p>
            
            <div class="one-image-row">
                <img src="./media/caricature.png">
            </div>
            
            <p>
                I believe my pictures could've been better if they were made in a similar way, but I couldn't make a good one and ended up having this. However, the effect of average is clearly seen in dataset pictures.
            </p>
        </section>
        
        <a href="../index.html" class="btn">Back to Portfolio</a>
        
        <footer>
            <p><span class="code-bracket">return</span> CS180 Portfolio &copy; 2023;</p>
        </footer>
    </div>
</body>
</html>
